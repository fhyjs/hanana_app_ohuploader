<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../../webui/assets/jquery-3.7.1.min.js"></script>
    <script src="../../webui/assets/sweetalert2.js"></script>
    <script src="../../webui/assets/app.js"></script>
    <script src="../../webui/assets/page.js"></script>
</head>
<body>
    <h1>转载</h1>
    <hr>
    <label>
        二选一
        <br>
        <input type="text" id="bvid" placeholder="bv号(BV...)"><br>
        <input type="text" id="avid" placeholder="av号(AV...)"><br>
        <button id="next">下一步</button>
    </label>
    <hr>
    <label>
        <a href="3.html?href=batch1.html" >实验性功能！ -- 批量转载<br/>警示:可能导致服务器或客户端崩溃!!</a>
    </label>
    <hr>
    版本: v7 <br>
    v7: 恢复快速登录，转载高清视频。<br/>
    由于请求均为同步，下载数据时会使浏览器标签页未响应，请耐心等待 <br>
    问题反馈：QQ群782767861 <br>
    本工具后端已切换到api.ottohub.cn <br>
    <a href="https://github.com/fhyjs/hanana_app_ohuploader" target="_blank">源代码</a>
    <script>
        $("#next").click(function(){
            var bvid = $("#bvid").val();
            var avid = $("#avid").val();
            var type="";
            var vid="";
            if (avid!=""){
                console.log("av");
                type="av";
                vid=avid;
            } else if(bvid!=""){
                console.log("bv");
                type="bv";
                vid=bvid;
            }else{
                Swal.fire({
                    title: "ERROR",
                    text: "二选一",
                    icon: "error"
                });
                return;
            }
            if(vid.toLowerCase().startsWith("av")||vid.toLowerCase().startsWith("bv")){
                vid=vid.substring(2);
            }
            window.location.href=`2.html?type=${type}&vid=${vid}`;
        });
    </script>
</body>
</html>